# NGINX App Protect WAF Documentation Refactor

_Author_: Alan Dooley (@adubhlaoich)  
_Date_: March 21st, 2025
_Stakeholders_: NGINX App Protect WAF product team, DocOps team 

_Relevant information_:
- [NGINX App Protect WAF Documentation](https://docs.nginx.com/nginx-app-protect-waf)

## Introduction

This proposal describes my observations about the NGINX App Protect WAF documentation set, and my plan for how to address its problems. 

It will be shared with various stakeholders to challenge or verify certain assumptions and to give the product team advance warning, as the changes involved are substantial.

## Issues identified

### Content duplication

As it stands, the majority of NAP documentation between the V4 and V5 branches are identical - they have the same pages and same sections. 

Where they deviate are how they are deployed, and and what features are available. In the latter case, it seems that all of the newer functionality features are in V5.

I think the structure reflects an earlier intent for V5/X to completely replace/subsume 4, which didn’t occur in the end, requiring that both sets of documentation be maintained concurrently, in contrast to documentation for 4 being archived.

As a result, humongous amounts of the content is replicated, which lead an over-use of includes. There is a secondary over-use of includes I will detail in the next section. 

### Monolithic pages

NGINX App Protect pages are typically “only child” documents within folders, creating unnecessary nesting. 

Individual pages fully encapsulate all documentation for a use case in one page: so every possible permutation of installation documentation and related documentation (Migration, upgrade, uninstallation) all exist in the same document.

This leads to a huge amount of reading fatigue, and maintaining this pattern has also lead context-independent information being placed inside these monolithic pages with no real relationship to other sections. 

This pattern was enabled by an over-use of includes, where includes were being treated as whole pages since the content was being duplicated across the separate folders.

Since taking responsibility for the documentation set, I removed all include files that were being used in only one place, which appeared to be a way for documentation authors to compartmentalize their updates without considering the user experience of the documentation set as a whole.

## Proposed changes

Overall, the whole documentation set can be flattened down into one set of documentation, though the parallel maintenance of V4 and development of V5 mean that features exclusive to V5 will need to be clearly differentiated.

I will remove duplicate content, and subsequently remove any excess and redundant include files. V5-specific content will be delineated with their own pages and given a unique page template to explicitly mark that they only apply to V5.

As part of this effort, the current monolithic pages will be split into self-contained single topics, grouped by use case. As they are grouped together this way, they will be named and ordered to match other NGINX products so that customers within the ecosystem have a consistent experience across the whole portfolio.

### Information architecture diagrams

This first diagram shows the current architecture of the documentation:

```mermaid

```


At initial glance, this does not seem overly complex aside from the V4/5 split. Expanding the diagram to illustrate the use cases of each page gives a better impression of the user impact of the current layout:

```mermaid

```

My suggested layout looks as follows:

```mermaid

```


With my proposed layout in mind, here is more detail about specific sections of the new architecture.

### Installation section

The current “NGINX App Protect WAF Administration Guide” page will be broken into an “Installation” section, similar to other product sets. V4 and V5 instructions will be delineated with tabs, sections or entire pages, depending on the amount of content and functionality available from the website.

Here are examples of what the individual pages may be:

- "Bare metal" deployment
- Docker deployment
- Kubernetes deployment (V5 specific)
- Offline deployment (Possibly called "Airgapped", or "Disconnected environment".)

The Administration Guide also has a number of post-installation steps which can be turned into discrete pages.

- Upgrade NGINX App Protect
- Update NGINX App Protect Signatures
- Uninstall NGINX App Protect
- Configure SELinux for NGINX App Protect

### Use case sections

Beyond the administration guide, the “NGINX App Protect WAF Configuration Guide” is the second largest monolithic page, which can also be broken down into individual pages and sections.

- Configuring NAP WAF itself
- Policies
- Attack signatures
- References

### Move Troubleshooting information into contextual pages

We try to avoid two kinds of pages: Frequently asked questions, and Troubleshooting guides. 

In the latter case, the context-specific troubleshooting information will be added to their use case pages. Further investigation will likely lead to notes or warnings about common or necessary user actions to avoid the need to troubleshoot at all.

### Create a Support page

A singular Support page will be created, matching the format of existing Support pages for other products - there is likely already an include to explain the F5 support policy and where a customer should go to engage with it. V4 and V5 have different ways to access logs, so they can be given their own discrete sections

## Future work